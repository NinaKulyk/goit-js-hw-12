{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44189904-4675a190af98c4e4efc911d57';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","export function createImageMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <div class=\"photo-card\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b>${likes}</p>\n        <p class=\"info-item\"><b>Views</b>${views}</p>\n        <p class=\"info-item\"><b>Comments</b>${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n}\n\nexport function renderImages(markup) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function toggleLoadMoreButton(show) {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (show) {\n    loadMoreButton.classList.remove('hidden');\n  } else {\n    loadMoreButton.classList.add('hidden');\n  }\n}\n\nexport function showEndOfResultsMessage() {\n  const endMessage = document.createElement('p');\n  endMessage.classList.add('end-message');\n  endMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n  document.querySelector('.gallery').insertAdjacentElement('afterend', endMessage);\n}\n\nexport function clearEndOfResultsMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  createImageMarkup,\n  renderImages,\n  clearGallery,\n  toggleLoadMoreButton,\n  showEndOfResultsMessage,\n  clearEndOfResultsMessage\n} from './/js/render-functions.js';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('.load-more');\nlet query = '';\nlet page = 1;\nlet lightbox;\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  page = 1;\n  clearGallery();\n  toggleLoadMoreButton(false);\n  clearEndOfResultsMessage();\n\n  if (query === '') return;\n\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      alert('No images found. Please try a different query.');\n      return;\n    }\n\n    const markup = createImageMarkup(data.hits);\n    renderImages(markup);\n    toggleLoadMoreButton(data.hits.length >= 15);\n    initLightbox();\n\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  try {\n    const data = await fetchImages(query, page);\n    const markup = createImageMarkup(data.hits);\n    renderImages(markup);\n    toggleLoadMoreButton(data.hits.length >= 15);\n\n    if (data.hits.length < 15) {\n      toggleLoadMoreButton(false);\n      showEndOfResultsMessage();\n    }\n\n    smoothScroll();\n    lightbox.refresh();\n\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction initLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: \"alt\" });\n  } else {\n    lightbox.refresh();\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","error","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","markup","clearGallery","gallery","toggleLoadMoreButton","show","loadMoreButton","showEndOfResultsMessage","endMessage","clearEndOfResultsMessage","form","lightbox","onFormSubmit","onLoadMore","event","data","initLightbox","smoothScroll","cardHeight","SimpleLightbox"],"mappings":"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"}